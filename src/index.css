@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    font-family: 'Inter', sans-serif;
    scroll-behavior: smooth;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Cormorant Garamond', serif;
  }
}

@layer utilities {
  /* Fade-in del logo top-center */
  @keyframes logo-fade-in {
    0% {
      opacity: 0;
      transform: translateY(-8px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .logo-fade-in {
    animation: logo-fade-in 600ms ease-out both;
  }
  @keyframes slideInFromTop {
    0% {
      opacity: 0;
      transform: translateY(-20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeInScale {
    0% {
      opacity: 0;
      transform: scale(0.95);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes glow {
    0%, 100% {
      box-shadow: 0 0 5px rgba(236, 72, 153, 0.3);
    }
    50% {
      box-shadow: 0 0 20px rgba(236, 72, 153, 0.6);
    }
  }

  @keyframes ken-burns {
    0% {
      transform: scale(1.1);
    }
    100% {
      transform: scale(1.2);
    }
  }

  .animate-ken-burns {
    animation: ken-burns 8s ease-out infinite alternate;
  }

  /* Variante lenta per Landing (più cinematica) */
  .animate-ken-burns-slow {
    animation: ken-burns 16s ease-out infinite alternate;
  }

  /* Accessibilità: riduce o elimina le animazioni se l’utente preferisce meno movimento */
  @media (prefers-reduced-motion: reduce) {
    .animate-ken-burns,
    .animate-ken-burns-slow {
      animation: none !important;
    }
  }

  /* Galleria autoscorrevole (marquee) */
  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  /* Nuove classi per controllo preciso della marquee */
  .marquee-container {
    width: 100%;
    overflow: hidden;
  }
  .marquee-track {
    flex-wrap: nowrap; /* forza una sola riga, evita il ritorno a capo */
    animation: marquee 60s linear infinite; /* velocità ridotta (più lenta) */
    will-change: transform;
  }
  .marquee-container:hover .marquee-track {
    animation-play-state: paused; /* pausa al passaggio del mouse */
  }

  /* Slider mobile: scorrimento una foto alla volta */
  .mobile-slider {
    width: 100%;
    overflow: hidden;
  }
  .mobile-slider-track {
    display: flex;
    will-change: transform;
    transition: transform 800ms ease;
  }
  .mobile-slider-track.no-transition {
    transition: none;
  }
  .mobile-slider-track > img {
    flex-shrink: 0; /* ogni immagine occupa esattamente il 100% della larghezza del contenitore */
    width: 100%;
  }

  /* Indicatore scroll (mouse) con rimbalzo leggero, per evitare clipping su mobile */
  @keyframes soft-bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-6px);
    }
  }
  .animate-soft-bounce {
    animation: soft-bounce 1.5s ease-in-out infinite;
  }

  /* Tipografia H1 responsive con clamp: più controllata su mobile */
  .h1-responsive {
    font-size: clamp(1.75rem, 4vw + 0.5rem, 3rem);
    line-height: 1.2;
    letter-spacing: -0.01em;
  }

  /* Layout pannelli Landing (CSS-only per desktop) */
  @media (min-width: 768px) {
    .panels {
      /* il container dei pannelli */
      background-color: transparent; /* rimuovo lo sfondo nero del container per evitare la “quarta sezione” visiva */
      gap: 0; /* nessuno spazio tra i pannelli */
    }
    .panels .panel {
      /* base desktop: ripartizione proporzionale, animabile; flex-grow 1 elimina eventuali gap da arrotondamento */
      flex: 1 0 auto;
      flex-basis: 15%;
      transition: flex-basis 2200ms cubic-bezier(0.22, 1, 0.36, 1);
      will-change: flex-basis;
      /* prevenzione flicker/alone su Safari/Chrome con filter/transform */
      background-color: transparent; /* nessun bordo/alone scuro visibile attorno al pannello */
      contain: paint; /* isola la pittura del pannello */
      transform: translateZ(0);
      backface-visibility: hidden;
      margin-right: -1px; /* sovrappone leggermente i pannelli per evitare linee da arrotondamento */
      position: relative; /* consente z-index per l’hover */
      outline: 1px solid transparent; /* forza l’anti-aliasing per prevenire hairlines */
    }
    .panels .panel:last-child {
      margin-right: 0; /* nessuna sovrapposizione sull’ultimo pannello per evitare tagli sul bordo destro */
    }
    .panels .panel:not(:first-child) {
      margin-left: -1px; /* sovrapposizione simmetrica anche sul bordo sinistro dei pannelli 2 e 3 */
    }
    .panels .panel:hover {
      z-index: 2; /* il pannello al hover sta sopra nella sovrapposizione */
    }
    .panels .panel > img {
      transform: translateZ(0);
      backface-visibility: hidden;
    }
    .panels .panel[data-panel="collezione"] {
      /* stato iniziale: collezione al 70% */
      flex-basis: 70%;
    }
    .panels:hover .panel:hover {
      /* pannello sotto hover: espansione al 80% */
      flex-basis: 80%;
    }
    .panels:hover .panel:not(:hover) {
      /* pannelli non attivi: laterali stretti */
      flex-basis: 10%;
    }
  }
}
